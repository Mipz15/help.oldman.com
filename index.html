<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="css/bootstrap.min.css">
</head>
<style>
body {background: url("images/background.jpg")}
</style>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <a id="q1"><h1><strong><em><center><font color="orange">Help.oldman.com </font></center></strong></em></h1></a>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3">
        <img src="images/brands.png" width="130px"/></br>
        <h2>Search</h2></br>
        <a href=http://google.com><strong>Google</strong></a></br>
        <a href=http://yandex.com><strong>Яндекс</strong></a></br>
        <a href=https://mail.ru/><strong>Mail.ru</strong></a></br>
      </div>
      <div class="col-md-3">
        <img src="images/email.jpg" width="65px"/></br>
        <h2>E-Mail</h2></br>
        <a href=https://mail.ru><strong>Mail Почта</strong></a></br>
        <a href=https://mail.google.com><strong>Gmail.com</strong></a></br>
        <a href=https://mail.yandex.ru><strong>Яндекс Почта</strong></a>
      </div>
      <div class="col-md-3">
        <img src="images/youtube.jpg" width="110px"></br>
        <h2>Video</h2></br>
        <a href=http://hdrezka.tv/><strong>HDrzka</strong></a></br>
        <a href=https://www.youtube.com/><strong>YouTube</strong></a></br>
        <a href=https://yandex.ru/video/?clid=2270456&win=317><strong>Яндекс Видео</strong></a></br>
      </div>
      <div class="col-md-3">
        <img src="https://i.ytimg.com/vi/vH5D6Czb2-s/maxresdefault.jpg" width="110px"></br
       <a><strong>Game</strong></a>
  <div>
    <button id="start">Start</button>
  </div>
  <canvas id="labyrinth" width="200" height="200"></canvas>
  <div id="result"></div>
  <script src="js/jquery-3.3.1.slim.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript">
  	function whereAmI(imgData) {
  		if (imgData[0] === 0 && imgData[1] === 0 && imgData[2] === 0) {
  			console.log('Wall')
  			return 0;
  		}
  		if (imgData[0] === 255 && imgData[1] === 255 && imgData[2] === 255) {
  			console.log('Path')
  			return 1;
  		}
  		if (imgData[0] === 0 && imgData[1] === 255 && imgData[2] === 0) {
  			console.log('Start')
  			return 2;
  		}
  		if (imgData[0] === 255 && imgData[1] === 0 && imgData[2] === 0) {
  			console.log('Finish')
  			return 3;
  		}
  		console.log('Nowhere')
  		return -1
  	}

    $(function() {
  var grid = [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [2,2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [2,2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,0,0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,0,0,0,1,1,0,0,1,1,1,1,1,1,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,1,1,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0],
              [0,0,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0],
              [0,0,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0],
              [0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0],
              [0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0],
              [0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,3,3],
              [0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,3,3],
              [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]
  	
    var ctx = $("#labyrinth")[0].getContext("2d");
   	for (var y = 0; y < 40; y++) {
    	for (var x = 0; x < 40; x++) {
    		switch (grid[y][x]) {
    			case 0: // Wall
    				ctx.fillStyle = "rgba(0,0,0,127)";
    				break;
    			case 1: // Path
    				ctx.fillStyle = "rgba(255,255,255,127)";
    				break;
    			case 2: // Start
    				ctx.fillStyle = "rgba(0,255,0,127)";
    				break;
    			case 3: // Finish
    				ctx.fillStyle = "rgba(255,0,0,127)";
    				break;
    		}
			ctx.fillRect(x * 5, y * 5, 5, 5);
    	}
    }

    $("#labyrinth").hide()
    $("#result").hide()

    $("#start").click(function() {
    	 $("#labyrinth").show()
    	 $("#result").show()
    	 $("#result").text("")
    })

    var playing = false

    $("#labyrinth").mousedown(function(e) {
      if (!playing) {
        var parentOffset = $(this).offset(); 
        var relX = e.pageX - parentOffset.left;
        var relY = e.pageY - parentOffset.top;
        var imgData=ctx.getImageData(relX,relY,1,1);
        if (whereAmI(imgData.data) === 2) {
      	  playing = true
        }
      }
    })
    $("#labyrinth").mouseup(function(e) {
      if (playing) {
        var parentOffset = $(this).offset(); 
        var relX = e.pageX - parentOffset.left;
        var relY = e.pageY - parentOffset.top;
        var imgData=ctx.getImageData(relX,relY,1,1);
        if (whereAmI(imgData.data) === 3) {
        	playing = false
        	$("#result").text("You win!")
        } else {
        	playing = false
        	$("#result").text("Start again")
        }
      }
    })
    $("#labyrinth").mousemove(function(e) {
      if (playing) {
        var parentOffset = $(this).offset(); 
        var relX = e.pageX - parentOffset.left;
        var relY = e.pageY - parentOffset.top;
        var imgData=ctx.getImageData(relX,relY,1,1);
        if (whereAmI(imgData.data) === 0) {
        	playing = false
        	$("#result").text("You are dead!")
        }
      }
    })
  });
  </script>
      </div>
      <div class="col-md-3">
      </div>
    </div>
  </div>
  <br/>
  <br/>
  <br/>
  <br/>
  <br/>
  <a href="welcome.html"><h1><strong><center><font color="blue">Начать обучение</font></center></strong></h1></a>
  <script src="js/jquery-3.3.1.slim.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
</body>
</html>
